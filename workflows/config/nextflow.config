// Configuration for Nextflow to manage containers and process settings

// Path settings for Apptainer containers
singularity {
    enabled = true              // Enable the use of Singularity containers
    autoMounts = true          // Enable automatic mounting of directories
    cacheDir = "$baseDir/singularity" // Directory for caching containers
}

process {
    // Default options for the downloadfastq process
    withName:downloadfastq {
        container = 'sratoolkit_latest.sif' // Container image for downloading SRA files
        cpus = 4                           // Allocate 4 CPUs for this process
        memory = '8 GB'                    // Allocate 8 GB of memory
        time = '2h'                        // Set a maximum run time of 2 hours
    }

    // Default options for the runfastqc process
    withName:runfastqc {
        container = 'fastqc_latest.sif'    // Container image for FastQC analysis
        cpus = 2                           // Allocate 2 CPUs for this process
        memory = '4 GB'                    // Allocate 4 GB of memory
        time = '1h'                        // Set a maximum run time of 1 hour
    }

    // General resource management options
    executor = 'local'                // Use local executor for the VM
    scratch = true                     // Use temporary space for each process
    publishDirMode = 'copy'           // Copy generated files to the output directory
}

// Define execution options
params {
    outputDir = "$baseDir/results"   // Output directory for results
    workDir = "$baseDir/work"         // Working directory for Nextflow
}

// Environment variables
env.PATH = '/usr/local/bin:/usr/bin:/bin' // Set the PATH for executables